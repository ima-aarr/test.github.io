<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ULTIMATE_DEEP_LINK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
    }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Space+Mono&display=swap');
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Space Mono', monospace; touch-action: none; }
        .ui-layer { position: fixed; inset: 0; z-index: 50; pointer-events: none; }
        .interactive { pointer-events: auto; }
        .glitch-title { font-family: 'Syncopate', sans-serif; font-size: clamp(2rem, 10vw, 8rem); line-height: 0.9; text-transform: uppercase; color: white; mix-blend-mode: difference; }
        #data-box { background: rgba(255,255,255,0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1); }
        .vignette { position: fixed; inset: 0; background: radial-gradient(circle, transparent 20%, black 150%); pointer-events: none; z-index: 10; }
    </style>
</head>
<body class="text-white">
    <div class="vignette"></div>
    <div class="ui-layer flex flex-col justify-between p-6 md:p-12">
        <div class="flex justify-between items-start opacity-40 text-[7px] md:text-[9px] tracking-[1em]">
            <div>SYS_LOG: <span id="log-status">ACTIVE</span></div>
            <div>COORDS: <span id="coords">0.0, 0.0</span></div>
        </div>

        <div class="text-center relative">
            <h1 class="glitch-title mb-4 select-none">YOUR<br>NAME</h1>
            <div class="text-[8px] md:text-[10px] tracking-[1.5em] opacity-30">DIMENSIONAL_INTERFACE</div>
        </div>

        <div class="flex flex-col md:flex-row justify-between items-end gap-6">
            <div id="data-box" class="p-6 max-w-xs opacity-0 transform translate-y-10">
                <div id="box-title" class="text-cyan-400 text-[10px] font-bold mb-2 tracking-widest">---</div>
                <div id="box-content" class="text-[9px] text-white/60 leading-relaxed">---</div>
            </div>
            
            <div class="flex flex-wrap gap-3 interactive">
                <button id="warp-btn" class="px-6 py-3 border border-white/20 text-[9px] tracking-[0.4em] hover:bg-white hover:text-black transition-all">WARP</button>
                <button id="color-btn" class="px-6 py-3 border border-white/20 text-[9px] tracking-[0.4em] hover:bg-white hover:text-black transition-all">SPECTRUM</button>
            </div>
        </div>
    </div>

    <canvas id="canvas" class="fixed inset-0 z-0"></canvas>

    <script type="module">
        import * as THREE from 'three';

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas'), antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        const galaxyCount = 15000;
        const galaxyGeo = new THREE.BufferGeometry();
        const galaxyPos = new Float32Array(galaxyCount * 3);
        const galaxyColor = new Float32Array(galaxyCount * 3);
        for(let i=0; i<galaxyCount*3; i++) {
            galaxyPos[i] = (Math.random() - 0.5) * 200;
            galaxyColor[i] = Math.random();
        }
        galaxyGeo.setAttribute('position', new THREE.BufferAttribute(galaxyPos, 3));
        galaxyGeo.setAttribute('color', new THREE.BufferAttribute(galaxyColor, 3));
        const stars = new THREE.Points(galaxyGeo, new THREE.PointsMaterial({ size: 0.1, vertexColors: true, transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending }));
        scene.add(stars);

        const floaters = [];
        const geometries = [new THREE.IcosahedronGeometry(2, 0), new THREE.TorusGeometry(3, 0.1, 16, 100), new THREE.OctahedronGeometry(2, 0)];
        const labels = [
            { t: "QUANTUM_NODE", c: "High-speed data processing fragment floating in the digital void." },
            { t: "CORE_ARCHIVE", c: "Encrypted memory structures containing historical project logs." },
            { t: "NEURAL_LINK", c: "Interactive synapse connecting user intent to system response." }
        ];

        for(let i=0; i<12; i++) {
            const mesh = new THREE.Mesh(geometries[i % 3], new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true, transparent: true, opacity: 0.2 }));
            mesh.position.set((Math.random()-0.5)*60, (Math.random()-0.5)*40, (Math.random()-0.5)*40);
            mesh.userData = labels[i % 3];
            scene.add(mesh);
            floaters.push(mesh);
        }

        camera.position.z = 60;

        let mouse = new THREE.Vector2(), target = new THREE.Vector2();
        let raycaster = new THREE.Raycaster();
        let warpSpeed = 0.001;

        const onMove = (x, y) => {
            mouse.x = (x / window.innerWidth) * 2 - 1;
            mouse.y = -(y / window.innerHeight) * 2 + 1;
            document.getElementById('coords').innerText = `${mouse.x.toFixed(2)}, ${mouse.y.toFixed(2)}`;
        };

        window.addEventListener('mousemove', e => onMove(e.clientX, e.clientY));
        window.addEventListener('touchmove', e => onMove(e.touches[0].clientX, e.touches[0].clientY));

        window.addEventListener('mousedown', () => {
            raycaster.setFromCamera(mouse, camera);
            const hits = raycaster.intersectObjects(floaters);
            const box = document.getElementById('data-box');
            if(hits.length > 0) {
                document.getElementById('box-title').innerText = hits[0].object.userData.t;
                document.getElementById('box-content').innerText = hits[0].object.userData.c;
                box.style.opacity = "1";
                box.style.transform = "translateY(0)";
            } else {
                box.style.opacity = "0";
                box.style.transform = "translateY(10px)";
            }
        });

        document.getElementById('warp-btn').addEventListener('click', () => warpSpeed = warpSpeed < 0.05 ? 0.05 : 0.001);
        document.getElementById('color-btn').addEventListener('click', () => {
            stars.material.color.setHex(Math.random() * 0xffffff);
            floaters.forEach(f => f.material.color.setHex(Math.random() * 0xffffff));
        });

        function animate() {
            requestAnimationFrame(animate);
            stars.rotation.y += warpSpeed;
            floaters.forEach((f, i) => {
                f.rotation.x += 0.01;
                f.rotation.y += 0.01;
                f.position.y += Math.sin(Date.now() * 0.001 + i) * 0.02;
            });
            target.x += (mouse.x - target.x) * 0.05;
            target.y += (mouse.y - target.y) * 0.05;
            camera.position.x += (target.x * 20 - camera.position.x) * 0.05;
            camera.position.y += (-target.y * 20 - camera.position.y) * 0.05;
            camera.lookAt(0,0,0);
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
